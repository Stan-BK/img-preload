var E=Object.defineProperty;var I=(s,e,t)=>e in s?E(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var i=(s,e,t)=>(I(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();const d=[],f=[],u=[];function m(s){return d.splice(0,d.length,...Array.isArray(s)?s:[...Array.from(document.images),...Array.from(document.querySelectorAll("image"))]),f.splice(0,f.length),u.splice(0,u.length),d}const g=()=>{};class v{handleImgLoaded(e){if(e.setAttribute("is-handle-load","true"),e instanceof SVGImageElement)e.setAttribute("xlink:href",e.href.baseVal);else{const n=p(this.lazySrcAttr,e);if(e.complete&&n===e.src){this.onLoad(e),f.push(e),this.updateProgress(e);return}}const t=this.handler.bind(this,"load",this.onLoad,e);e.addEventListener("load",t),e.preloadLoadEventHandler=t}handleImgLoadFailed(e){if(!(e instanceof SVGImageElement)){const n=p(this.lazySrcAttr,e);if(e.complete&&n===e.src)return}const t=this.handler.bind(this,"error",this.onError,e);e.addEventListener("error",t),e.preloadErrorEventHandler=t}handleImgAllSettle(){this.onFinish(f,u)}updateProgress(e){this.currentLoadImg=e,!(++this.loadedCount>d.length)&&(this.progress=this.loadedCount/d.length,this.shade.render(this.progress*100),d.length===this.loadedCount&&this.handleImgAllSettle())}handler(e,t,n){if(!(n instanceof SVGImageElement)){const r=p(this.lazySrcAttr,n);if(this.isLazy&&r!==n.src)return}e==="load"?f.push(n):u.push(n),t(n),this.updateProgress(n)}}function p(s,e){const t=e.getAttribute(s);return encodeURI(t)==="null"?e.src:encodeURI(t)}class A{constructor(e={}){i(this,"shade");i(this,"lastPercent",0);i(this,"lastTime",0);i(this,"lastRenderPercent",0);i(this,"target",0);i(this,"isHidden",!1);i(this,"isCustom",!1);i(this,"percentSign",document.createElement("span"));i(this,"customShade");i(this,"customColor");i(this,"animationFrame",0);const{customShade:t,customColor:n}=e;this.customShade=t,this.customColor=n,this.shade=this.initShade()}initShade(){const e=this.customShade,t=this.customColor,n=document.createElement("div"),{marginLeft:r,marginRight:o,marginTop:a,marginBottom:h}=w(),c={position:"fixed",left:`-${r}px`,top:`-${a}px`,width:`calc(100vw + ${r+o}px)`,height:`calc(100vh + ${a+h}px)`,backgroundColor:"#F3F3F3",opacity:"1",transition:"opacity .4s",zIndex:"99999"};for(let[l,b]of Object.entries(c))n.style[l]=b;if(e){const l=typeof e=="function";if(!(e instanceof HTMLElement)&&!l)throw new Error(`customShade expect a HTML element or a function, but got a ${e}`);this.isCustom=!0,l?e(0,{shade:n,show:this.show,hide:this.hide}):n.appendChild(e),this.percentSign.remove()}else this.renderDefaultStyle(t),n.appendChild(this.percentSign);return n.addEventListener("transitionend",()=>{this.isHidden&&(this.shade.style.display="none")}),document.body.appendChild(n),n}renderDefaultStyle(e){var a;const r={position:"fixed",left:"50vw",top:" 50vh",fontSize:"94px",fontWeight:"bold",background:e?Array.isArray(e)?`linear-gradient(135deg, ${e.length===1?e[0]+","+e[0]:e.toString()})`:`linear-gradient(135deg, ${e}, ${e})`:"linear-gradient(135deg, red, orange, yellow, green, blue, purple, red, orange, yellow, green, blue, purple, red)",backgroundClip:"text",webkitBackgroundClip:"text",backgroundRepeat:"no-repeat",backgroundSize:"200% 200%",color:"rgb(0, 0, 0, .2)",transform:"translate(-50%, -50%)",lineHeight:"100%",animation:"animateBg infinite linear 2s",fontFamily:"sans-serif"};for(let[h,c]of Object.entries(r))this.percentSign.style[h]=c;this.percentSign.innerHTML="0%";const o=document.createElement("style");o.type="text/css",document.head.appendChild(o),(a=o.sheet)==null||a.insertRule(`
      @keyframes animateBg {
        from {
          background-position: 0% 0%;
        }
        to {
          background-position: 100% 100%;
        }
      }
    `)}render(e){if(this.isCustom){const t=this.customShade;typeof t=="function"&&t(e,{shade:this.shade,show:this.show,hide:this.hide});return}this.target=e,cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(this.renderShade.bind(this))}renderShade(e=0){this.lastPercent<this.target&&this.lastPercent++;const t=this.lastPercent;if(t!==this.lastRenderPercent){if(e-this.lastTime>20&&(this.lastTime=e,this.percentSign.innerHTML=`${this.lastRenderPercent=t}%`,this.shade.style.background=`linear-gradient(to right, #ccc, transparent ${50-t/2}%),
                                     linear-gradient(to left, #ccc, transparent ${50-t/2}%),
                                     linear-gradient(#f3f3f3, #f3f3f3)`,t===100)){setTimeout(()=>this.hide(),500);return}requestAnimationFrame(this.renderShade.bind(this))}}show(){this.shade.style.display="block",this.isHidden=!1,this.shade.style.opacity="1"}hide(){this.shade.style.opacity="0",this.isHidden=!0}reload(){this.percentSign&&(this.percentSign.innerHTML="0%"),this.lastPercent=0,this.lastTime=0,this.lastRenderPercent=0,this.target=0,this.isHidden=!1,this.show()}}function w(){const{marginLeft:s,marginTop:e,marginRight:t,marginBottom:n}=getComputedStyle(document.body);return{marginLeft:parseInt(s),marginTop:parseInt(e),marginRight:parseInt(t),marginBottom:parseInt(n)}}function P(s){let e=s.offsetParent,t=s.offsetLeft,n=s.offsetTop;for(;e;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{offsetLeft:t,offsetTop:n}}let S;function T(s,e){S=e;let t;const n=[];for(const r of d){const o=y(r);if(!s){L(r);continue}o?n.push(r):(t=y.bind(null,r,t),document.addEventListener("scroll",t))}s&&d.splice(0,d.length,...n)}function y(s,e){if(s instanceof SVGImageElement)return!0;const{offsetTop:t}=P(s);return t>window.innerHeight+window.scrollY+500?!1:(L(s),e&&document.removeEventListener("scroll",e),!0)}function L(s){s instanceof SVGImageElement||s.src===""&&(s.src=s.getAttribute(S))}class H extends v{constructor({images:t,isLazy:n=!1,lazySrcAttr:r="data-src",onLoad:o=g,onError:a=g,onFinish:h=g,customShade:c,customColor:l}={}){super();i(this,"isLazy");i(this,"lazySrcAttr");i(this,"images");i(this,"shade");i(this,"onLoad");i(this,"onError");i(this,"onFinish");i(this,"currentLoadImg");i(this,"progress",0);i(this,"loadedCount",0);if(!globalThis.document)throw new Error("ImgPreload only access in browser.");this.images=m(t),this.isLazy=n,this.onLoad=o,this.onError=a,this.onFinish=h,this.lazySrcAttr=r,this.shade=new A({customShade:c,customColor:l}),this.init()}init(){this.bindEvent(),T(this.isLazy,this.lazySrcAttr)}show(){this.shade.show()}hide(){this.shade.hide()}bindEvent(){const t=this.images;for(let n=0;n<t.length;n++){const r=t[n];this.handleImgLoaded(r),this.handleImgLoadFailed(r)}t.length===0&&(this.shade.render(100),this.handleImgAllSettle())}reload(t){for(let n of this.images)n.removeEventListener("load",n.preloadLoadEventHandler),n.removeEventListener("error",n.preloadErrorEventHandler);this.images=m(t),this.progress=0,this.loadedCount=0,this.init()}}const F=document.getElementsByClassName("loaded-list")[0],k=/(.*?).jpg/;new H({isLazy:!0,lazySrcAttr:"data-src",onLoad(s){if(!s.className.includes("bg")){const t=decodeURI(s.src).split("/").reverse()[0].match(k)[1];z(t)}}});function z(s){const e=document.createElement("li");e.innerHTML=s,e.addEventListener("click",()=>{location.hash=s}),F.appendChild(e)}
